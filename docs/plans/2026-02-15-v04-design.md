# macbroom v0.4 Design — Scan Profiles & New Scanners

## Goal

Add scan profiles for one-command cleanup of grouped scanner categories, and three new scanners covering the remaining major dev ecosystems (Maven, Gradle, Ruby).

## New Scanners

### MavenScanner
- **Targets**: `~/.m2/repository`
- **Risk**: Safe (dependencies re-downloadable)
- **Category**: "Maven"
- **Constructor**: `NewMavenScanner(home string)`

### GradleScanner
- **Targets**: `~/.gradle/caches`, `~/.gradle/wrapper/dists`
- **Risk**: Safe (caches and wrapper distributions re-downloadable)
- **Category**: "Gradle"
- **Constructor**: `NewGradleScanner(home string)`

### RubyScanner
- **Targets**: `~/.gem`, `~/.bundle/cache`
- **Risk**: Safe (gems re-installable)
- **Category**: "Ruby"
- **Constructor**: `NewRubyScanner(home string)`

All scanners follow the established pattern: home-dir constructor, Scanner interface, context cancellation checks.

## Scan Profiles

Three predefined flag-based profiles on `scan` and `clean` commands:

| Flag | Expands to | Purpose |
|------|-----------|---------|
| `--dev` | Node, Python, Rust, Go, JetBrains, Maven, Gradle, Ruby | All dev-tool caches |
| `--caches` | System, Browser, Homebrew | All general caches |
| `--all` | Every scanner | Explicit scan-everything |

**Behavior**:
- Profiles combine with individual flags: `--dev --docker` scans dev tools + Docker
- Multiple profiles combine: `--dev --caches` scans both groups
- `--all` overrides everything (returns nil = scan all)
- Implemented as syntactic sugar expanding in `selectedCategories()`

## Config Changes

- Add `Maven`, `Gradle`, `Ruby` bool fields to `ScannersConfig` (default `true`)
- No new config sections — these scanners only need home dir

## Integration

- Register scanners conditionally in `buildEngine()`
- Add `--maven`, `--gradle`, `--ruby` individual flags to scan/clean
- Add category colors to theme
- Update README: flags table, "What it cleans" table, config example, architecture

## Testing

- Per-scanner: Name, Interface, FindsCache, NoDir, ContextCancelled
- Config defaults for new toggles
- Profile expansion: verify `--dev`/`--caches`/`--all` produce correct category lists
